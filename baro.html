<!DOCTYPE html>
<html>
<head>

</head>


<body>

    <div width=50% style="margin-left: 200px;margin-top:50px;">

        <canvas id="myCanvas" width="100" height="400" style="border:1px solid #000000;"></canvas>    
    </div>


</body>
<script>
    var urlParams = new URLSearchParams(window.location.search);
    var solid = urlParams.has("solid");

    var canvas = document.getElementById("myCanvas");
    var h = canvas.height;
    var w = canvas.width;
    var ctx = canvas.getContext("2d");
    var grd = ctx.createLinearGradient(0, 0, 0, h);
    grd.addColorStop(0, "green");
    if(solid)
        grd.addColorStop(0.332, "green");
    grd.addColorStop(0.333, "yellow");
    grd.addColorStop(0.666, "yellow");
    if(solid)
        grd.addColorStop(0.667, "red");
    grd.addColorStop(1, "red");

    var charSize = 10;
    ctx.font = charSize + "px Arial";
    var topHours = 30;
    var topFlights = 45;


    var l=Math.max(0.15*w, 2*charSize);
    var r=Math.min(0.85*w, w-2*charSize);
    var t=Math.max(0.05*h, 2*charSize);
    var b=0.95*h;
    var bh = b-t;
    var bw = r-l;
    ctx.fillStyle = grd;
    ctx.fillRect(l, t, bw, bh);    

    var leftLabel = w < 7 * charSize ? "T" : "Timer";
    var rightLabel = w < 7 * charSize ? "S" : "Starter";

    ctx.fillStyle = "#000000";
    ctx.textAlign = "start";
    ctx.fillText(leftLabel, 0, charSize);
    ctx.textAlign = "end";
    ctx.fillText(rightLabel, w, charSize);

    ctx.textAlign = "end";
    for(var hours=0;hours<=topHours;hours+=3){
        var dy = bh*hours/topHours;
        ctx.fillText(hours, l-2, b-dy+charSize/2);
    }
    ctx.textAlign = "start";
    for(var flights=0;flights<=topFlights;flights+=3){
        var dy = bh*flights/topFlights;
        ctx.fillText(flights, r+2, b-dy+charSize/2);
    }

    var H = urlParams.get("hours");
    var F =  urlParams.get("flights");
    if(H && F){
        var yH = bh*H/topHours;
        var yF = bh*F/topFlights;
        var cx = (r+l)/2;
        var cy = (yH+yF)/2;
        ctx.moveTo(l,b-yH);
        ctx.lineTo(r,b-yF);
        ctx.stroke();
        ctx.beginPath();
        ctx.arc(cx, b-cy, bw/10, 0, 2*Math.PI);
        ctx.stroke();

        if(cy > bh){
            ctx.fillStyle = "green";
            ctx.beginPath();
            var nA = 3;
            var hA = t/nA;
            for(var n=0;n<nA;n++){
                ctx.moveTo (cx, n*hA);
                ctx.lineTo (cx-10, (n+1)*hA);
                ctx.lineTo (cx, (n+0.5)*hA);
                ctx.lineTo (cx+10, (n+1)*hA);
                ctx.lineTo (cx, n*hA);
            }
            ctx.fill();
        }
    }
</script>
</html>